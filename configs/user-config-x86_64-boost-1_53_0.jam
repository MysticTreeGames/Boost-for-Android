# Copyright 2003, 2005 Douglas Gregor
# Copyright 2004 John Maddock
# Copyright 2002, 2003, 2004, 2007 Vladimir Prus
# Distributed under the Boost Software License, Version 1.0.
# (See http://www.boost.org/LICENSE_1_0.txt)

# ------------------
# Android configurations.
# ------------------

import os ;
local AndroidNDKRoot = [ os.environ AndroidNDKRoot ] ;
local AndroidBinariesPath = [ os.environ AndroidBinariesPath ] ;
local AndroidToolchainPrefix = [ os.environ AndroidToolchainPrefix ] ;
local AndroidNDKCompilerVersion = [ os.environ AndroidNDKCompilerVersion ] ;
local AndroidNDKApiLevel = [ os.environ AndroidNDKApiLevel ] ;

using gcc : $(AndroidNDKCompilerVersion)
:
$(AndroidBinariesPath)/$(AndroidToolchainPrefix)-g++
:
<archiver>$(AndroidBinariesPath)/$(AndroidToolchainPrefix)-ar
<compileflags>-fexceptions
<compileflags>-frtti
<compileflags>-fpic
<compileflags>-ffunction-sections
<compileflags>-funwind-tables
<compileflags>-Wno-psabi
<compileflags>-Os
<compileflags>-fomit-frame-pointer
<compileflags>-fno-strict-aliasing
<compileflags>-finline-limit=64
<compileflags>-I$(AndroidNDKRoot)/sources/android/support/include
<compileflags>-DTHOUSEP=MON_THOUSANDS_SEP
<compileflags>-DRADIXCHAR=MON_DECIMAL_POINT
<compileflags>-I$(AndroidNDKRoot)/platforms/android-$(AndroidNDKApiLevel)/arch-arm/usr/include
<compileflags>-Wa,--noexecstack
<compileflags>-DANDROID
<compileflags>-D__ANDROID__
<compileflags>-DNDEBUG
<compileflags>-O2
<compileflags>-g
<compileflags>-I$(AndroidNDKRoot)/sources/cxx-stl/gnu-libstdc++/$(AndroidNDKCompilerVersion)/include
<compileflags>-I$(AndroidNDKRoot)/sources/cxx-stl/gnu-libstdc++/$(AndroidNDKCompilerVersion)/libs/armeabi/include
# @Moss - Above are the 'oficial' android flags
<architecture>x86_64
<compileflags>-fvisibility=hidden
<compileflags>-fvisibility-inlines-hidden
<compileflags>-fdata-sections
<cxxflags>-D_REENTRANT
<cxxflags>-D_GLIBCXX__PTHREADS
;
